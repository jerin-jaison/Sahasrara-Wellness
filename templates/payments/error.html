{% extends "bookings/base_booking.html" %}
{% block title %}Payment Error â€” Sahasrara Wellness{% endblock %}

{% block content %}
<div class="booking-title-wrapper">
    <div class="booking-divider"></div>
    <h4 class="booking-title text-center">System Encountered an Issue</h4>
    <p class="text-muted small">Something went wrong during payment</p>
</div>

<div class="premium-card mx-auto text-center" style="max-width: 550px;">
    <div class="icon-box-premium mx-auto mb-4"
        style="width: 64px; height: 64px; font-size: 2rem; background: rgba(220, 53, 69, 0.1); color: #dc3545;">
        <i class="bi bi-bug"></i>
    </div>

    <h5 class="text-white fw-bold mb-3">Unable to Process Payment</h5>
    <p class="text-white-50 mb-4 px-3">
        {% if message %}
        {{ message }}
        {% else %}
        We encountered a technical error while communicating with the payment gateway. Your slot might still be safe for
        a few minutes.
        {% endif %}
    </p>

    {% if booking %}
    <div class="summary-item-premium mb-4 text-start" style="border-color: rgba(220, 53, 69, 0.2);">
        <div class="d-flex align-items-center gap-3">
            <div class="icon-box-premium small" style="background: rgba(220, 53, 69, 0.1); color: #dc3545;"><i
                    class="bi bi-info-circle"></i></div>
            <div>
                <span class="tiny text-white-50 text-uppercase fw-bold" style="letter-spacing:1px">Booking
                    Reference</span>
                <div class="text-white small">{{ booking.id|truncatechars:12 }}</div>
            </div>
        </div>
    </div>

    <form action="{% url 'payments:initiate' booking.id %}" method="get">
        {% include "components/sticky_cta.html" with label="Try Payment Again" button_id="retry-btn" %}
    </form>
    {% else %}
    <a href="{% url 'bookings:step1_branch' %}"
        class="btn-premium-gold w-100 py-3 text-decoration-none d-block rounded-4">
        <span class="glow-txt"><i class="bi bi-house"></i> Return to Homepage</span>
    </a>
    {% endif %}

    <div class="mt-4">
        <p class="tiny text-muted">Technical support: <span class="text-gold">support@sahasrarawellness.com</span></p>
    </div>
</div>

<style>
    .summary-item-premium {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid var(--border-subtle);
        border-radius: 16px;
        padding: 16px;
    }

    .icon-box-premium {
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .icon-box-premium.small {
        width: 32px;
        height: 32px;
        font-size: 1rem;
    }

    .btn-premium-gold {
        background: linear-gradient(135deg, var(--gold) 0%, #e3c87a 100%);
        color: #0b0b0b;
        font-weight: 700;
        border: none;
        box-shadow: 0 10px 30px rgba(198, 164, 90, 0.2);
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-premium-gold:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 40px rgba(198, 164, 90, 0.3);
        color: #000;
    }

    .tiny {
        font-size: 0.7rem;
    }
</style>
{% endblock %}